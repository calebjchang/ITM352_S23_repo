<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
// Used ChatGPT to tweak the function to dynamically change properly
function checkQuantityTextbox(qtyTextbox) {
    const qtyErrors = document.getElementById(qtyTextbox.id + "_errors");
    const qtyAva = parseInt(qtyTextbox.dataset.qtyAva); // get the available quantity from the dataset attribute
    const inputQty = parseInt(qtyTextbox.value);
    
    if (isNaN(inputQty) || inputQty < 0) {
        qtyErrors.innerHTML = "Please enter a valid positive integer.";
    } else if (inputQty > qtyAva) {
        qtyErrors.innerHTML = "We donâ€™t have " + inputQty + " available. Maximum available quantity is " + qtyAva + '.';
        qtyTextbox.value = qtyAva;
    } else {
        qtyErrors.innerHTML = "";
    }
};


        let params = (new URL(document.location)).searchParams;
        function isNonNegInt(q) {
            errors = [];
            if(Number(q) != q) errors.push('Not a number!');
            else { 
            if (q < 0) errors.push('Negative value!');
            if(parseInt(q) != q) errors.push('Not an integer!');
            return errors;
            }};
    </script>
</head>
<body>
    
    <form name="quantity_form" action='./process_purchase' method="POST">
        quantity desired: <input id="quantity_textbox" name="quantity_textbox" type="text" onkeyup="checkQuantityTextbox(this)">
        <span id='quantity_textbox_message'>Enter a quantity</span>
        <br>
        <input id="purchase_button" type="submit" value="Purchase">
    </form>
</body>
</html>